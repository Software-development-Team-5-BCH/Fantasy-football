(this.webpackJsonpfantasy_football=this.webpackJsonpfantasy_football||[]).push([[0],{53:function(t,e,a){},54:function(t,e,a){},72:function(t,e,a){},73:function(t,e,a){},78:function(t,e,a){},79:function(t,e,a){},80:function(t,e,a){},85:function(t,e,a){},86:function(t,e,a){"use strict";a.r(e);var n=a(1),s=a(2),c=a.n(s),r=a(17),i=a(43),o=a.n(i),l=(a(53),a(24)),j=a(8),h=a(9),u=a(11),d=a(10),b=(a(54),a(30)),m=a.n(b),p=a(23),O=a(44),f=a(45),x=a.n(f),g=(a(72),a(73),function(t){var e=t.fname,a=t.sname,s=t.score,c=t.cost,r=t.form,i=t.points,o=t.image;return Object(n.jsx)("div",{className:"fav-list",children:Object(n.jsxs)("table",{children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Name"}),Object(n.jsx)("th",{children:"Score"}),Object(n.jsx)("th",{children:"Cost"}),Object(n.jsx)("th",{children:"Form"}),Object(n.jsx)("th",{children:"Points"}),Object(n.jsx)("th",{children:"Image"})]})}),Object(n.jsx)("tbody",{children:Object(n.jsxs)("tr",{children:[Object(n.jsxs)("th",{children:[e," ",a]}),Object(n.jsx)("th",{children:s}),Object(n.jsx)("th",{children:c}),Object(n.jsx)("th",{children:r}),Object(n.jsx)("th",{children:i}),Object(n.jsx)("th",{children:Object(n.jsx)("img",{src:o})})]})})]})})}),v=a(22),y=(a(74),a(76),a(46));v.a.initializeApp({apiKey:"AIzaSyC9jVr0pZmRq-opnjfZrHIDaMVo7sF6y04",authDomain:"fantasyfootball-28733.firebaseapp.com",databaseURL:"https://fantasyfootball-28733.firebaseio.com",projectId:"fantasyfootball-28733",storageBucket:"fantasyfootball-28733.appspot.com",messagingSenderId:"513154005009",appId:"1:513154005009:web:d84e354b676dd72799d9b0",measurementId:"G-KLX84DK1X7"});var N=v.a.auth(),k={googleProvider:new v.a.auth.GoogleAuthProvider},U=Object(y.a)({providers:k,firebaseAppAuth:N}),w=a(27);a(78);function D(t){var e=t.user,a=Object(s.useState)([]),c=Object(w.a)(a,2),r=c[0],i=c[1],o=Object(s.useState)(""),l=Object(w.a)(o,2),j=l[0],h=l[1],u=Object(s.useState)(!1),d=Object(w.a)(u,2),b=d[0],m=d[1];Object(s.useEffect)((function(){if(e){console.log("update"),m(!0);var t=v.a.firestore(),a=v.a.auth().currentUser.uid;t.collection("users").doc(a).get().then((function(t){var e=t.data();e&&(i(e.team),m(!1))}))}}),[e]);var O=function(t){var e=v.a.firestore(),a=v.a.auth().currentUser.uid,n={team:t};e.collection("users").doc(a).set(n).then((function(e){i(t),h("")})).catch((function(t){console.log("Storing Error",t)}))};return Object(n.jsxs)("div",{className:"myTeam",children:[Object(n.jsxs)("div",{className:"myTeamHeader",children:[Object(n.jsx)("h3",{children:"My Team (".concat(r.length," players)")}),Object(n.jsx)("i",{children:"\u25bc"})," "]}),Object(n.jsx)("input",{value:j,type:"text",onChange:function(t){return h(t.target.value)}}),Object(n.jsx)("button",{onClick:function(){var t=[].concat(Object(p.a)(r),[j]);O(t)},children:"Add new player"}),b&&Object(n.jsx)("div",{children:"Loading..."}),r.map((function(t,e){return Object(n.jsxs)("div",{className:"myTeamPlayer",children:[Object(n.jsx)("label",{}),Object(n.jsx)("p",{children:t}),Object(n.jsx)("button",{onClick:function(e){return function(t){var e=Object(p.a)(r).filter((function(e){return e!==t}));O(e)}(t)},children:"X"})]},e)}))]})}var S={_limit:1},F=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(j.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(t=e.call.apply(e,[this].concat(s))).state={league:{events:[],elements:[]},isLoading:!1,fname:"",sname:"",cost:"",score:"",form:"",points:"",image:"",user:null},t}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.setState({isLaoding:!0}),x.a.get("https://cors-anywhere.herokuapp.com/https://fantasy.premierleague.com/api/bootstrap-static/",{params:S}).then((function(e){return t.setState({league:e.data,isLoading:!1})}))}},{key:"addHandler",value:function(t){var e=this.state.league.elements.find((function(e){return e.id==t}));this.setState({fname:e.first_name,sname:e.second_name,score:e.goals_scored,cost:e.now_cost,form:e.form,points:e.total_points,image:e.photo}),this.addToUserTeam(e)}},{key:"addToUserTeam",value:function(){var t=Object(O.a)(m.a.mark((function t(e){var a,n,s,c,r,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=v.a.firestore(),n=v.a.auth().currentUser.uid,t.next=4,a.collection("users").doc(n).get();case 4:if(s=t.sent){t.next=7;break}return t.abrupt("return");case 7:return c=s.data(),r=[].concat(Object(p.a)(c.team),["".concat(e.first_name," ").concat(e.second_name," ").concat(e.total_points)]),i={team:r},t.next=12,a.collection("users").doc(n).set(i);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return this.state.isLoading?Object(n.jsx)("p",{children:"Loading....."}):Object(n.jsxs)("div",{children:[Object(n.jsx)(g,{fname:this.state.fname,sname:this.state.sname,score:this.state.score,cost:this.state.cost,form:this.state.form,points:this.state.points,image:this.state.image}),Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Player list"}),Object(n.jsx)("ul",{className:"playerslist",children:this.state.league.elements.map((function(e){return Object(n.jsxs)("li",{className:"player",children:[Object(n.jsx)("h2",{children:e.first_name}),Object(n.jsx)("p",{children:e.second_name}),Object(n.jsx)("p",{children:e.form}),Object(n.jsx)("p",{children:e.now_cost}),Object(n.jsx)("p",{children:e.goals_scored}),Object(n.jsx)("p",{children:e.total_points}),Object(n.jsx)("p",{children:e.creativity}),Object(n.jsx)("img",{src:e.photo}),Object(n.jsxs)("div",{className:"add",onClick:function(){return t.addHandler(e.id)},children:["+"," "]})]},e.id)}))})]}),this.props.user&&Object(n.jsx)(D,{user:Object(l.a)({},this.props.user)})]})}}]),a}(s.Component),T=a(5),_=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(){return Object(j.a)(this,a),e.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return Object(n.jsx)("h1",{className:"homePage",children:"Fantasy Football"})}}]),a}(s.Component),C=(a(79),function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(j.a)(this,a),(n=e.call(this,t)).state={table:t.standings[0].table},n}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(t){this.props.standings!==t.standings&&this.setState({table:this.props.standings[0].table})}},{key:"render",value:function(){var t=new Date(this.props.lastUpdate);return Object(n.jsxs)("ul",{className:"league-table",children:[Object(n.jsx)("li",{className:"league-name",children:this.props.league}),Object(n.jsx)("li",{className:"table-heading",children:Object(n.jsx)("ul",{children:["Pos","Team","Pld","W","D","L","GF","GA","GD","Pts"].map((function(t){return Object(n.jsx)("li",{children:t},t)}))})},"th"),this.state.table.map((function(t){return Object(n.jsx)("li",{className:"table-row",children:Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{className:"pos",children:t.position},"0"),Object(n.jsxs)("li",{className:"team",children:[Object(n.jsx)("img",{className:"crest",src:t.team.crestUrl,alt:""}),t.team.name]},"1"),Object(n.jsx)("li",{children:t.won+t.draw+t.lost},"2"),Object(n.jsx)("li",{children:t.won},"3"),Object(n.jsx)("li",{children:t.draw},"4"),Object(n.jsx)("li",{children:t.lost},"5"),Object(n.jsx)("li",{children:t.goalsFor},"6"),Object(n.jsx)("li",{children:t.goalsAgainst},"7"),Object(n.jsx)("li",{className:"gd",children:t.goalDifference},"8"),Object(n.jsx)("li",{className:"pts",children:t.points},"9")]})},t.team.id)})),Object(n.jsxs)("li",{className:"last-update",children:["Last update:"," ","".concat(t.getHours(),":").concat(t.getMinutes()," ").concat(t.getDate()," ").concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]," ").concat(t.getFullYear())]})]})}}]),a}(c.a.Component));a(80);function A(t){var e=t.user,a=t.signOut,s=t.signInWithGoogle;return Object(n.jsxs)("div",{className:"header",children:[Object(n.jsxs)("nav",{children:[Object(n.jsx)(r.b,{to:"/",children:"Home"}),Object(n.jsx)(r.b,{to:"/players",children:"Players"}),Object(n.jsx)(r.b,{to:"/Table",children:"Table"}),Object(n.jsx)(r.b,{to:"/fixtures",children:"Fixtures"})]}),e?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("p",{children:["Hello, ",e.displayName]}),Object(n.jsx)("button",{onClick:a,children:"Sign out"})]}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("p",{children:"Please sign in."}),Object(n.jsx)("button",{onClick:s,children:"Sign in with Google"})]})]})}var L=function(t){return fetch(t,{headers:{"X-Auth-Token":"cb8f29c7705e44e0b795f3feb6546789"}}).then((function(t){return t.json()})).catch((function(t){return console.warn("fetch error:",t)})).then((function(t){return t}))},M=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(j.a)(this,a),(n=e.call(this,t)).state={data:null},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var t=this;L(this.getFetchUrl()).then((function(e){return t.setState({data:e})}))}},{key:"componentDidUpdate",value:function(t){var e=this;this.props.match.params.country!==t.match.params.country&&L(this.getFetchUrl()).then((function(t){return e.setState({data:t})}))}},{key:"render",value:function(){return this.state.data?Object(n.jsx)(C,{league:this.state.data.competition.name,standings:this.state.data.standings,lastUpdate:this.state.data.competition.lastUpdated}):Object(n.jsx)("div",{className:"loading",children:"Data Loading..."})}},{key:"getFetchUrl",value:function(){return"http://api.football-data.org/v2/competitions/PL/standings/"}}]),a}(c.a.Component),P=(a(85),function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(j.a)(this,a),(n=e.call(this,t)).state={matches:t.matches},n}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(t){this.props.matches!==t.matches&&this.setState({matches:this.props.matches})}},{key:"render",value:function(){var t=new Date(this.props.lastUpdate);return Object(n.jsxs)("ul",{className:"fixtures",children:[Object(n.jsx)("h2",{children:this.props.league}),Object(n.jsxs)("div",{className:"last-update",children:["Last update:"," ","".concat(t.getDate()," ").concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]," ").concat(t.getFullYear())]}),this.state.matches.map((function(t){return Object(n.jsxs)("div",{className:"results",children:[Object(n.jsxs)("div",{children:["Matchday: ",t.matchday]}),Object(n.jsx)("div",{className:"team",children:t.homeTeam.name}),Object(n.jsx)("div",{className:"score",children:t.score.fullTime.homeTeam}),Object(n.jsx)("div",{className:"team",children:t.awayTeam.name}),Object(n.jsx)("div",{className:"score",children:t.score.fullTime.awayTeam}),Object(n.jsxs)("div",{className:"status",children:["Match status: ",t.status]})]},t.id)}))]})}}]),a}(c.a.Component)),I=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(j.a)(this,a),(n=e.call(this,t)).state={data:null},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var t=this;L(this.getFetchUrl()).then((function(e){return t.setState({data:e})}))}},{key:"componentDidUpdate",value:function(t){var e=this;this.props.match.params.country!==t.match.country&&L(this.getFetchUrl()).then((function(t){return e.setState({data:t})}))}},{key:"render",value:function(){return this.state.data?Object(n.jsx)(P,{league:this.state.data.competition.name,matches:this.state.data.matches,lastUpdate:this.state.data.competition.lastUpdated}):Object(n.jsx)("div",{className:"loading",children:"Data Loading..."})}},{key:"getFetchUrl",value:function(){return"https://api.football-data.org/v2/competitions/2021/matches"}}]),a}(c.a.Component),G=U(function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(){return Object(j.a)(this,a),e.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var t=this.props,e=t.user,a=t.signOut,s=t.signInWithGoogle;return Object(n.jsxs)(r.a,{children:[Object(n.jsx)(A,{user:e,signOut:a,signInWithGoogle:s}),Object(n.jsx)("div",{children:Object(n.jsxs)(T.c,{children:[Object(n.jsx)(T.a,{path:"/",component:_,exact:!0}),Object(n.jsx)(T.a,{path:"/players",render:function(t){return Object(n.jsx)(F,Object(l.a)(Object(l.a)({},t),{},{user:e}))}}),Object(n.jsx)(T.a,{path:"/table",component:M,exact:!0}),Object(n.jsx)(T.a,{path:"/fixtures",component:I,exact:!0})]})})]})}}]),a}(s.Component));o.a.render(Object(n.jsxs)(r.a,{children:[Object(n.jsx)(G,{})," "]}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.6b75cbd0.chunk.js.map